<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.yunting.Screenshot.mapper.ImgorderMapper">
    <resultMap id="BaseResultMap" type="com.yunting.Screenshot.entity.Imgorder">
        <id column="order_id" property="orderId" jdbcType="BIGINT"/>
        <result column="order_money" property="orderMoney" jdbcType="DECIMAL"/>
        <result column="order_player_id" property="orderPlayerId" jdbcType="BIGINT"/>
        <result column="androidID" property="androidID" jdbcType="VARCHAR"/>
        <result column="packageName" property="packagename" jdbcType="VARCHAR"/>
        <result column="with_draw_percentage" property="withdrawPercentage" jdbcType="BIGINT"/>
        <result column="is_get" property="isGet" jdbcType="CHAR"/>
    </resultMap>

    <insert id="insertOneOrder" useGeneratedKeys="true" keyColumn="order_id" keyProperty="orderId">
        insert into behind_manage.imgorder (order_player_id, appid,
                                            androidID, wxName, withdraw_percentage)
        values (#{orderPlayerId}, #{appid}, #{androidID}, #{wxname}, #{withdrawPercentage})
    </insert>

    <update id="updateOrderStatus">
        update behind_manage.imgorder
        set is_get = #{isGet}
        where order_id = #{orderID}
    </update>

    <select id="selectPlayerOrderNoURl" resultType="com.yunting.Screenshot.dto.img.ImgShow">
        select directory, fileName, uploadTime, fileHash
        from behind_manage.image_mapping
        where player_id = #{playerID}
          and img_type = #{imgType}
          and is_approval = 'i'
    </select>

    <select id="selectImgByImginfo" resultType="com.yunting.Screenshot.entity.ImageMapping">
        select img_id, directory
        from behind_manage.image_mapping
        where fileHash = #{hashVal}
          and fileName = #{fileName}
    </select>

    <select id="selectImgByName" resultType="com.yunting.Screenshot.entity.ImageMapping">
        select img_id, directory, fileName, fileHash
        from behind_manage.image_mapping
        where fileName = #{fileName}
    </select>

</mapper>